(this.webpackJsonpproexe=this.webpackJsonpproexe||[]).push([[0],{28:function(e,t,n){e.exports=n(63)},33:function(e,t,n){},40:function(e,t,n){},58:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(7),o=n.n(r),c=(n(33),n(4)),s=n(8),i=n(22),u=n(23),d=n(27),m=n(26),p=(n(40),n(5)),E=n.n(p),f=function(e){return{type:"ADD_USERS",payload:e}},h=(n(58),function(e){console.log("usersprops",e);var t=e.users.map((function(t){return l.a.createElement("tr",{key:t.id},l.a.createElement("td",null,t.id),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.username),l.a.createElement("td",null,t.email),l.a.createElement("td",null,t.address?t.address.city:""),l.a.createElement("td",null,l.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(){return e.openAdd(t.id)}},"Edit")),l.a.createElement("td",null,l.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return e.openDelete(t.id)}},"Delete")))}));return l.a.createElement("div",{className:"card table-container "},l.a.createElement("div",{className:"add-user-panel"},l.a.createElement("div",null,l.a.createElement("h4",null,"User List")),l.a.createElement("div",null,l.a.createElement("button",{type:"button",className:"btn btn-primary add-btn",onClick:function(){return e.openAdd()}},"Add New"))),l.a.createElement("table",{className:"table"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,"Id"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Username"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"City"),l.a.createElement("th",null,"Edit"),l.a.createElement("th",null,"Delete"))),l.a.createElement("tbody",null,t)))}),b=(n(59),n(25)),g=(n(61),function(e){var t=Object(b.a)(),n=t.register,r=t.handleSubmit,o=t.errors;Object(a.useEffect)((function(){var e=document.querySelectorAll("input"),t=[];e.forEach((function(e){Object.keys(o).forEach((function(n){n===e.name?t.push(e):e.style.borderColor="gray"}))})),t.forEach((function(e){e.style.borderColor="red"}))}),[o]);var c=e.editing&&e.users.find((function(t){return t.id===e.editing}));return l.a.createElement("div",{className:"card table-container"},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h4",null,"Form")),l.a.createElement("form",{onSubmit:r((function(t){if(console.log(t,e,e.postuser),e.editing){var n=e.editing;e.editUser({data:t,editing:n}),e.closeAdd()}else e.postUser(t),e.closeAdd()}))},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{class:"col-sm-4 col-form-label text-center"},"Name"),l.a.createElement("div",{class:"col-sm-8"},l.a.createElement("input",{className:"form-control",defaultValue:c?c.name:"",type:"text",placeholder:"name",name:"name",ref:n({required:!0})}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{class:"col-sm-4 col-form-label text-center"},"Email"),l.a.createElement("div",{class:"col-sm-8"},l.a.createElement("input",{className:"form-control",defaultValue:c?c.email:"",type:"email",placeholder:"email",name:"email",ref:n({required:!0})}))),l.a.createElement("div",{className:"btn-container"},l.a.createElement("button",{className:"btn btn-outline-danger cancel-btn",onClick:e.closeAdd},"Cancel"),l.a.createElement("input",{className:"btn btn-success",value:"Submit",type:"submit"})))))}),v=(n(62),function(e){return l.a.createElement("div",{className:"delete-popup"},l.a.createElement("div",{className:"delete-container card"},l.a.createElement("div",null,l.a.createElement("h5",null,"Delete")),l.a.createElement("div",{className:"popup-btn-container"},l.a.createElement("button",{className:"btn btn-dark",onClick:e.closeDelete},"Cancel"),l.a.createElement("button",{className:"btn btn-danger",onClick:function(){e.deletetUser(e.deleting),e.closeDelete()}},"Delete"))))}),y=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={addUserVisible:!1,deleteUserVisible:!1,editing:null,deleting:null},e.openAdd=function(t){console.log("openAdd",t),e.setState({addUserVisible:!0,editing:t})},e.closeAdd=function(){e.setState({addUserVisible:!1,editing:null})},e.openDelete=function(t){console.log("deleting",t),e.setState({deleteUserVisible:!0,deleting:t})},e.closeDelete=function(){e.setState({deleteUserVisible:!1,deleting:null})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log("fetching users"),0===this.props.users.length&&this.props.fetchUsers()}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("h1",null,"Dashboard"),this.state.addUserVisible?l.a.createElement(g,{editUser:this.props.editUser,users:this.props.users,editing:this.state.editing,postUser:this.props.postUser,closeAdd:this.closeAdd}):l.a.createElement(h,{users:this.props.users,openAdd:this.openAdd,openDelete:this.openDelete}),this.state.deleteUserVisible&&l.a.createElement(v,{closeDelete:this.closeDelete,deleting:this.state.deleting,deletetUser:this.props.deletetUser}))}}]),n}(a.Component),D=Object(s.b)((function(e){return{users:e.users}}),(function(e){return{fetchUsers:function(){return e((function(e){E.a.get("https://jsonplaceholder.typicode.com/users").then((function(t){console.log(t,t.data),e(f(t.data))})).catch((function(t){console.log(t),e(f(t))}))}))},postUser:function(t){return e((n=t,function(e){E.a.post("https://jsonplaceholder.typicode.com/users",n).then((function(t){var n=t.data;e(function(e){return{type:"ADD_USER",payload:e}}(n))})).catch((function(e){console.log(e)}))}));var n},deletetUser:function(t){return e((n=t,function(e){E.a.delete("https://jsonplaceholder.typicode.com/users/".concat(n)).then((function(t){e(function(e){return{type:"DELETE_USER",payload:e}}(n))})).catch((function(e){console.log(e)}))}));var n},editUser:function(t){return e(function(e){var t=e.editing;return function(n){E.a.patch("https://jsonplaceholder.typicode.com/users/".concat(t),e.data).then((function(e){console.log("edit response",e),n({type:"EDIT_USER",payload:{res:e,id:t}})})).catch((function(e){console.log(e)}))}}(t))}}}))(y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(24),A=n(6),N={users:[]},S=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_USERS":return e=n.payload,console.log("newusers",e),Object(A.a)({},t,{users:e});case"ADD_USER":return console.log("ADD USER PAYLOAD",n.payload),e=t.users.concat(n.payload),Object(A.a)({},t,{users:e});case"DELETE_USER":return e=t.users.filter((function(e){return e.id!==n.payload})),Object(A.a)({},t,{users:e});case"EDIT_USER":console.log("EDIT_USER_PAYLOAD",n.payload);var a=n.payload.id;console.log("PAYLOAD DATA",n.payload.res.data);var l=t.users.filter((function(e){return e.id===a}));return(e=t.users.slice()).splice(l,1,n.payload.res.data),console.log("NEWUSERS",e),Object(A.a)({},t,{users:e});default:return t}},O=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.c,w=Object(c.d)(S,O(Object(c.a)((function(e){return function(t){return function(n){console.log("[Middleware] Dispatching",n);var a=t(n);return console.log("[Middleware] next state",e.getState()),a}}}),U.a)));o.a.render(l.a.createElement(s.a,{store:w},l.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.971d7e0e.chunk.js.map